<!DOCTYPE html>
<html lang="en" >

	<head>
		<meta charset="UTF-8">
		<title>JumpApp</title>
		<link rel="stylesheet" href="css/style.css">
		<link rel="shortcut icon" type="image/x-icon" href="assets/favicon.ico" />
		<script src="graphics/phaser3-lib.js"></script>
	</head>

	<body>
		<script type="module">
			// Import the functions you need from the SDKs you need
			import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
			import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-firestore.js";
			import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-analytics.js";
			// TODO: Add SDKs for Firebase products that you want to use
			// https://firebase.google.com/docs/web/setup#available-libraries
			
			// Your web app's Firebase configuration
			// For Firebase JS SDK v7.20.0 and later, measurementId is optional
			const firebaseConfig = {
				apiKey: "AIzaSyBhUoTrvci0GjeUJ7niyM9x0lfdYLSn1A8",
				authDomain: "jumpapp-63d34.firebaseapp.com",
				projectId: "jumpapp-63d34",
				storageBucket: "jumpapp-63d34.appspot.com",
				messagingSenderId: "131996911254",
				appId: "1:131996911254:web:cb14c0e83918d3ef52e4b7",
				measurementId: "G-Z47ETPPHYZ"
			};
			
			// Initialize Firebase
			const app = initializeApp(firebaseConfig);
			const analytics = getAnalytics(app);

			const db = getFirestore(app);

			//Test function
/* 			addDataToFirestore({
				name: "Federico",
				surname: "Simeon",
				age: 27
			}, "test"); */

			//Function to add data to the database
			function addDataToFirestore(data, collectionName){
				addDoc(collection(db, collectionName), data)
				.then((docRef) => {
					console.log("Document written with ID: ", docRef.id);
				})
				.catch((error) => {
					console.error("Error adding document: ", error);
				});
			}


			//Test read data
			getDataFromFirestore("test");

			//Function to read data
			function getDataFromFirestore(collectionName){
				getDocs(collection(db, collectionName))
				.then((querySnapshot) => {
					const data = querySnapshot.docs.map((doc) => ({...doc.data(), id:doc.id}));
					console.log(data);
				})
				.catch((error) => {
					console.error("Error adding document: ", error);
				});
			}

		</script>
		<script src="audiosynth/audiosynth.js"></script>
		<script src="scaleMapping/scaleMapping.js"></script>
		<script src="pitchDetector/aubio.js"></script>
		<script src="pitchDetector/tuner.js"></script>
		<script src="pitchDetector/notes.js"></script>
		<script src="pitchDetector/pitchModule.js"></script>
		<script src="rhythm/rhythm.js"></script>
		<script type="text/javascript" src="graphics/graphics.js"></script>
	</body>

</html>
